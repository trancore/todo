# Todo FrontEnd

## フロントエンド開発の進め方

ここでは、実際にフロントエンド開発を進めていく中で考えたことを時系列順に記載していきます。

各モダンフロントエンドライブラリ、フレームワーク（以下、「ライブラリ等」）によって設計方法は異なるので、詳細はフレームワーク毎のルートディレクトリにある README を参照してください。

ここでは、それらに依らないことで考えたことを記載していこうと思います。

### 1. 技術選定

フロントエンド開発を進める前に、どのようなライブラリやフレームワークを使って実装していくかを考えました。

このリポジトリでは、勉強することを主軸に置いているので、実際は不要なライブラリや実装も含んでいます。

### -. ブランチ運用

| ブランチ名  | 説明               |
| ----------- | ------------------ |
| `main`      | 本番環境用ブランチ |
| `develop`   | 開発用ブランチ     |
| `feature/*` | 機能追加用ブランチ |
| `fix/*`     | バグ修正用ブランチ |

<details>
<summary><h3>-. 要件定義</h3></summary>

100%これに沿って開発していくわけではないので、あしからず。

![全体の構成](/apps/front/assets/images/overall-composition.png)

![主要なコンテンツ_1](/apps/front/assets/images/main-contents_1.png)

![主要なコンテンツ_2](/apps/front/assets/images/main-contents_2.png)

![主要なコンテンツ_3](/apps/front/assets/images/main-contents_3.png)

</details>

<details>
<summary><h3>-. デザイン</h3></summary>

100%これに沿って開発していくわけではないので、あしからず。

![デザイン](/apps/front/assets/images/design.png)

</details>

<details>
<summary><h3>-. 仕様書</h3></summary>

100%これに沿って開発していくわけではないので、あしからず。

![サインアップ画面](/apps/front/assets/images/specification-document_sign-in.png)

![サインイン画面](/apps/front/assets/images/specification-document_sign-in.png)

![トップ画面](/apps/front/assets/images/specification-document_top.png)

![Todo詳細画面](/apps/front/assets/images/specification-document_detail.png)

![Todo登録画面](/apps/front/assets/images/specification-document_register.png)

![Todo編集画面](/apps/front/assets/images/specification-document_edit.png)

![完了済み画面](/apps/front/assets/images/specification-document_completed.png)

![メニュー画面](/apps/front/assets/images/specification-document_menu.png)

![エラー画面](/apps/front/assets/images/specification-document_error.png)

</details>

### 2. コンポーネント設計・実装

ライブラリ等によっては、コンポーネントをどのように設計していくかを定義する必要があります。

次に、共通コンポーネントを実装していきます。共通で使うようなコンポーネントをデザイン、仕様書から構想します。

大体共通化されるのは、以下だと思っています。

- ヘッダー
- 入力フォーム
- モーダル
- アイコン
- ボタン
- メニュー
- トースト

テキストのコンポーネント化は行わないこととしました。なぜなら、

- p タグへのグローバル CSS の実装により、フォントやテキストカラー、太字の対応が行える
- 一部のテキストに対しては、そのコンポーネントへ独自の Styled-Component を指定すれば良い

と考えたからです。

### 3. マークアップ・ページ作成

共通コンポーネントが作成できたため、これらを使って画面一覧の URL に沿って画面のマークアップを実装していきます。

HTML のテンプレート、デザインの CSS を作成します。

このとき、条件によって表示非表示が分岐する要素とそのデザインも、すべて表示されている状態として作成することを忘れないでください。

必要であれば、ダミーの条件分岐を作成し、それで持って出しわけできるようなテンプレート作成が良いと思います。

画面は、デザイン、仕様書、画園一覧（このリポジトリでは掲載しません）を見て作成していきます。

### 4. JavaScript 実装

イベントやデータフェッチなどの、動きのある機能を実装します。

この実装は画面の機能によって多岐に渡り、画面仕様をきちんと理解し、何を実装しなければならないのかを十分に把握して進める必要があります。そのため、**その画面で実装する機能をできる限りリストアップし、タスク化して進めていかないと、実装漏れが起こってしまい**ます。

例えば、これらの実装には以下が挙げられます。

- リンクの URL
- イベント（クリック、ホバー、入力フォーム）
- バリデーション
- データフェッチ（データ表示。データ整形、エラーハンドリング）

また、複数の画面や共通機能として様々な仕様を考慮して実装しなければならないものもあると思います。例えば、認証認可システムのログイン実装や、入力-確認-完了画面があるような入力フロー画面などです。この場合、各画面でそれぞれの担当者がそれぞれに連携をとって実装する、というよりも、その一つの機能を一つのグループで対応した方が効率が良いです。

例えば、これらの実装には以下が挙げられます。

- ストア（コンポーネント間、画面間でデータを保持したい場合）
- 認証認可
- ミドルウェア実装

もちろん、データフェッチやバリデーションなども、まずはベースとなる共通実装を行う必要があるので、ここで記載しているものだけではないことに注意してください。

### 5. 自動テスト

我々実装者が保証すべきことはホワイトボックステストであり、コードの動作を保証することをテストコードで伝えることができれば良いです。

テスト名は、「何を」テストしているのかを簡潔に説明できていることが重要です。

さて、テストコードを書くときは、各テストが独立して実行されるようにしましょう。これによって、各テストがクリーンな状態で開始され、副作用を受けないようになります。

#### Unit テスト

Unit テストは、ロジックのみを持つ関数や変数に対してのみテストを行います。

あるロジックに対してテストを作成するとき、コードの動作についてのフローチャートを考えると分かりやすいです。

さらに、Unit テストを書くときは以下の点について、よく考慮するようにしましょう。

- 全てが正しく動いたと仮定して、理想的な条件下でメソッドはどのように動作するのか
- 特殊な条件やエッジケースはあるのか
- 例外が起きた時に、このメソッドはエラーを起こすのか
- ロジックの流れや条件分岐が、適切に動いているのか

※ 静的解析ツールや TypeScript を導入している場合は、型エラーがコンパイルエラーとして表示されます。なので、指定された型通りに値を渡せているかどうかはこのツールに任せ、Unit テストとしてはテストの対象に含めない、というルールにしても良いかもしれない。

そして、最終的に書いたテストが十分かどうかは、以下の 3 点を指標にして判断します。

- まずは、正しく動作することを保証しているか
- 壊れる可能性のある箇所はすべてテストしているか（もちろん全ては無理なので、よくあるケースやエッジケースなどを考慮できているか）
- テストファーストで考えられているか

##### 上級テクニック

テクニックとして、Unit テストでは、ネットワークに接続することは避けましょう。その代わり、テストデータを使います。

#### Component テスト

Component テストは、コンポーネント単位（画面単位も含む）でテストを行い、画面表示のための関数や変数を正しく取得するためのテストを行います。

#### EtoE テスト
